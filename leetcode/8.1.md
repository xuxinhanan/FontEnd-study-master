1.1 的问题：队头阻塞 —— http 采用请求-应答模式，当上一个请求没有响应回来后不能进行下一个请求。

（为此，1.1 还做了管线化的努力，但是浏览器最终没有实现）

目前为了解决队头阻塞问题的补丁解决方案是：为每个域名开启6个TCP，并且引入 CDN 域名分片机制；假设有3个CDN，将域名分成3个，那么就可以并发进行18个 TCP 连接。

此时，对于页面请求的资源来说，就可以在这18个 TCP 连接中进行。大大提高了加载速度。

然后这个方案也存在着问题：就是对带宽的利用率不理想。

主要是2个原因：

1.  TCP 慢启动。 TCP 连接传输速度会渐进地达到峰值，在此之前的时间浪费了带宽，并且有些小资源来说，慢启动过程无疑大大降低了传输速度
2. 多个 TCP 连接并发会相互竞争带宽。比如 18 个 TCP 连接下载资源，在下载过程中，发现带宽不足，则各个 TCP 会动态的减慢接收速度。而这就可以减慢了首屏加载的关键资源的速度。

为此，2.0的目的是在一个 TCP 连接中解决队头阻塞的问题。

解决队头阻塞的问题，关键在于多路复用。

比如，我们将一个资源分成多个块，然后将这些块交错的进行传输。这在1.1中是无法实现的，而2.0通过引入二进制分帧层完美地实现了这个需求。

通过在资源块前面放置帧，标记当前资源块属于哪个资源和块的大小。这样传给浏览器，浏览器就可以通过相同 ID 的帧合并成一条完成的响应信息。

并且通过资源分块，甚至可以将头信息分离出来，实现所谓的「头部压缩」。









