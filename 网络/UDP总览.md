IP 是非常底层的协议，只负责把数据包传送到对方电脑，但是对方电脑并不知道把数据包交给哪个程序，是交给浏览器还是交给王者荣耀？

因此，需要基于 IP 之上开发能和应用打交道的协议，最常见的是“**用户数据包协议**”，简称 UDP。

:white_check_mark:UDP 中一个最重要的信息是 **端口号**，**通过端口号 UDP 就能把指定的数据包发送给指定的程序**。

和 IP 头一样，端口号会被装进 UDP 头里面，UDP 头再和原始数据包合并组成新的 UDP 数据包。UDP 头中除了目的端口，还有源端口号等信息。

--------

在使用 UDP 发送数据时，有各种因素会导致数据包出错，虽然 UDP 可以校验数据是否正确，但是**对于错误的数据包，UDP 并不提供重发机制，只是丢弃当前的包，**而且 UDP 在发送之后也无法知道是否能达到目的地。

虽说 **UDP 不能保证数据可靠性，但是传输速度却非常快**，所以 UDP 会应用在一些关注速度、但不那么严格要求数据完整性的领域，如在线视频、互动游戏等。

-------------------

### TCP传输过程

![简化的 UDP 网络四层传输模型](https://static001.geekbang.org/resource/image/3e/ea/3edb673a43f23d84253c52124ce447ea.png?wh=1142*814)

下面我们一起来看下一个数据包从主机 A 传输到主机 B 的过程：

+ 上层将含有“极客时间”的数据包交给传输层；

+ 传输层会在数据包前面附加上 UDP 头，组成新的 UDP 数据包，再将新的 UDP 数据包交给网络层；

+ 网络层再将 IP 头附加到数据包上，组成新的 IP 数据包，并交给底层；

+ 数据包被传输到主机 B 的网络层，在这里主机 B 拆开 IP 头信息，并将拆开来的数据部分交给传输层；

+ 在传输层，数据包中的 UDP 头会被拆开，**并根据 UDP 中所提供的端口号，把数据部分交给上层的应用程序**；

+ 最终，含有“极客时间”信息的数据包就旅行到了主机 B 上层应用程序这里。

  
