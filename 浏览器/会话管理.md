## 4.cookie和session的异同

1. cookie数据存放在客户的浏览器上，session数据放在服务器上。
2. cookie不是很安全，别人可以分析存放在本地的cookie并进行cookie欺骗，考虑到安全应当使用session。
3. session会在一定时间内保存在服务器上。当访问增多，会比较占用你服务器的性能，考虑到减轻服务器性能方面，应当使用cookie。
4. 单个cookie保存的数据不能超过4K，很多浏览器都限制一个站点最多保存20个cookie
5. 可以考虑将登陆信息等重要信息存放为session，其他信息如果需要保留，可以放在cookie中。







## 5.会话跟踪的方式

http是无状态的，一次请求结束，连接断开，下次服务器再收到请求，它就不知道这个请求是哪个用户发过来的。当然它知道是哪个客户端地址发过来的，但是对于我们的应用来说，我们是靠用户来管理，而不是靠客户端。所以对我们的应用而言，它是需要有状态管理的，以便服务端能够准确的知道http请求是哪个用户发起的，从而判断他是否有权限继续这个请求。这个过程就是常说的会话管理。

**Cookie：** Cookie是Web服务器发送给客户端的一小段信息，客户端请求时可以读取该信息发送到服务器端，进而进行用户的识别。对于客户端的每次请求，服务器都会将Cookie发送到客户端,在客户端可以进行保存,以便下次使用。

**session：**用户第一次访问的时候，在服务器端会创建一个session对象，在session中可以存放信息。并且产生一个sessionID来标识这个session对象，然后将这个sessionID放入到Cookie中发送到客户端。这样当用户第二次及以后向服务器发送请求的时候，就会通过cookie把sessionid传回给服务器，以便服务器能够根据sessionid找到与该用户对应的session对象。

**token：**用户第一次访问的时候，将用户信息作数字签名，加密之后得到token，并返回给客户端，后续请求携带token，这样服务器对token作解密和签名认证后拿到其中的用户信息进行有效性判断。

**JWT：**JSON Web Token，一种成熟的 token 字符串生成方案。

+ 服务器认证以后，生成一个加了签名的 JSON 对象，发回给客户端      
+ 此后，客户端每次与服务器通信，都带上这个 JWT。可以把它放在 Cookie 里面自动发送，但是这样不能跨域，所以更好的做法是放在 HTTP 请求的头信息Authorization字段里面{ Authorization: Bearer <token> }











































































































































































