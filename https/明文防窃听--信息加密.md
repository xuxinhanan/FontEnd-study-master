### 密钥

由于 HTTPS、TLS 都运行在计算机上，所以“密钥”就是一长串的数字，但约定俗成的度量单位是“位”（bit），而不是“字节”（byte）。比如，说密钥长度是 128，就是 16 字节的二进制串，密钥长度 1024，就是 128 字节的二进制串。

按照密钥的使用方式，加密可以分为两大类：对称加密和非对称加密。



###  对称加密

对称加密是指加密和解密都使用的是相同的密钥。

![img](https://static001.geekbang.org/resource/image/8f/49/8feab67c25a534f8c72077680927ab49.png?wh=1869*838)



目前常用的加密算法是： AES（Advanced Encryption Standard）。

AES 的意思是“高级加密标准”，密钥长度可以是 128、192 或 256，是应用最广泛的对称加密算法。

<img src="C:\Users\64554\AppData\Roaming\Typora\typora-user-images\image-20220823143118077.png" alt="image-20220823143118077" style="zoom: 67%;" />

#### 工作原理

对称加密之所以能够实现同一把密钥既能够加密也能够解密，主要是基于**“XOR异或运算”**。以下图为例：密钥`1010`加密明文`0110`

<img src="C:\Users\64554\AppData\Roaming\Typora\typora-user-images\image-20220823144435060.png" alt="image-20220823144435060" style="zoom: 67%;" />

----------

对称加密看上去好像完美地实现了机密性，但其中有一个很大的问题：如何把密钥安全地传递给对方，即**“密钥交换”**。

如果通信双方约定的密钥在传递途中被黑客窃取，那么也就没有机密性可言了。

------

### 非对称密钥加密

非对称加密算法有两个密钥，一个叫**“公钥”**，一个叫**“私钥”**。

两个密钥是不同的，**公钥可以公开给任何人使用，而私钥必须严格保密。**

公钥和私钥虽然都可以用来加密解密，但公钥加密后只能用私钥解密，反过来，私钥加密后也只能用公钥解密。

<img src="https://static001.geekbang.org/resource/image/89/17/89344c2e493600b486d5349a84318417.png?wh=1938*1212" alt="img" style="zoom: 33%;" />



非对称加密算法最常用的是：RSA。

------

### 加密速度

实验环境的 URI“/24-3”对比了 AES 和 RSA 这两种算法的性能，下面列出了一次测试的结果：

~~~js
aes_128_cbc enc/dec 1000 times : 0.97ms, 13.11MB/s

rsa_1024 enc/dec 1000 times : 138.59ms, 93.80KB/s
rsa_1024/aes ratio = 143.17

rsa_2048 enc/dec 1000 times : 840.35ms, 15.47KB/s
rsa_2048/aes ratio = 868.13
~~~

可以看到，RSA 的运算速度是非常慢的，2048 位的加解密大约是 15KB/S（微秒或毫秒级），而 AES128 则是 13MB/S（纳秒级），差了几百倍。







